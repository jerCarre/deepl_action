<h1 id="comment-afficher-le-cours-dune-crypto-sur-sa-page-github">How to display the price of a crypto on its Github page?</h1>
<p>Behind this racy title is an article on how to create a static site displaying a chart with dynamic data (ie. the price of a crypto).</p>
<h2 id="docsify-cest-quoi">What is Docsify?</h2>
<p>Publishing static sites is becoming more and more fashionable, because their implementation is often easy and the writing language is basic. Several tools share the bill: <a href="https://jekyllrb.com/">Jekyll</a>, <a href="https://gohugo.io/">Hugo</a>... I chose another: <a href="https://docsify.js.org">Docsify</a>. It has the advantage of taking markdown as input ( <a href="https://medium.com/@jerome.carre/au-rapport-chef-f186726a7de8">I like markdown</a> ) and above all of processing it as is, it does not make any prior transformation into HTML.</p>
<p>Installing docsify is as simple as putting an index.html file at the root of the site:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>&lt;<span class="dt">DOCTYPE </span>html&gt;</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;html&gt;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;head&gt;</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;meta</span> <span class="er">http-equiv</span><span class="ot">=</span><span class="st">&quot;X-UA-Compatible&quot;</span> <span class="er">content</span><span class="ot">=</span><span class="st">&quot;IE=edge,chrome=1&quot;</span><span class="kw">&gt;</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;meta</span> <span class="er">name</span><span class="ot">=</span><span class="st">&quot;viewport&quot;</span> <span class="er">content</span><span class="ot">=</span><span class="st">&quot;width=device-width,initial-scale=1&quot;</span><span class="kw">&gt;</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;meta</span> <span class="er">charset</span><span class="ot">=</span><span class="st">&quot;UTF-8&quot;</span><span class="kw">&gt;</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;link</span> <span class="er">rel</span><span class="ot">=</span><span class="st">&quot;stylesheet&quot;</span> <span class="er">href</span><span class="ot">=</span><span class="st">&quot;//cdn.jsdelivr.net/npm/docsify@4/themes/vue.css&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/head&gt;</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;body&gt;</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;div</span> <span class="er">id</span><span class="ot">=</span><span class="st">&quot;app&quot;</span><span class="kw">&gt;&lt;/div&gt;</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;script&gt;</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  <span class="bu">window</span><span class="op">.</span><span class="at">$docsify</span> <span class="op">=</span> {</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>      <span class="dt">name</span><span class="op">:</span> <span class="st">'docsify vega'</span><span class="op">,</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>      <span class="dt">repo</span><span class="op">:</span> <span class="st">'https://github.com/jerCarre/docsify_vega'</span><span class="op">,</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>   }</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;/script&gt;</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;script</span> <span class="er">src</span><span class="ot">=</span><span class="st">&quot;//cdn.jsdelivr.net/npm/docsify@4&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/body&gt;</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/html&gt;</span></span></code></pre></div>
<p>and a content file README.md :</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># README.md</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>Hello world !</span></code></pre></div>
<blockquote>
<p>There is obviously a lot more that can be done with Docsify!</p>
</blockquote>
<h2 id="pages-dans-github">Pages in Github</h2>
<p>Github offers for free the Pages service to host a static site based on HTML, CSS, Javascript. It also provides a URL to access this site.</p>
<p>To use Pages, you just have to : 1. create a <strong>public</strong> repo 2. go to <code>Settings-&gt;Pages</code> 3. choose the branch hosting your site 4. indicate the path to index.html of docsify.</p>
<p>In return Github will give you the access URL.</p>
<p>After a few seconds, your site is online!</p>
<p><img src="https://jercarre.github.io/medium_stories/docsify_vega_github/empty.png" /></p>
<p>So we will have the following files in our :</p>
<pre class="text"><code>.
└── /
    ├── index.html
    └── README.md</code></pre>
<h2 id="vega-lite-forever">Vega-Lite forever</h2>
<p><a href="https://vega.github.io/vega/">Vega</a> is a javascript library allowing to display diagrams (curves, scatterplots, pie charts, maps, ...) . It is based on a json grammar. <a href="https://vega.github.io/vega-lite/">Vega-Lite</a> is a light version of Vega. Vega/Vega-Lite has the advantage of requiring only a few imports to work. Vega is intended to be embedded in other tools.</p>
<p>An overview of what you can draw with it in <a href="https://medium.com/@jerome.carre/au-rapport-chef-f186726a7de8">this previous article</a>.</p>
<h3 id="vega-lite-et-docsify">Vega-Lite and docsify</h3>
<p>Docsify allows to display diagrams in Mermaid format, to integrate others you need to use plugins. No plugin is listed on <a href="https://docsify.js.org/#/awesome?id=plugins">this page</a>, so I developed one for Vega/Vega-Lite. Its use is described here https://jercarre.github.io/vega_docsify/#/</p>
<p>So we have our index.html file (with 4 more script lines at the end):</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>&lt;<span class="dt">DOCTYPE </span>html&gt;</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;html&gt;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;head&gt;</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;meta</span> <span class="er">http-equiv</span><span class="ot">=</span><span class="st">&quot;X-UA-Compatible&quot;</span> <span class="er">content</span><span class="ot">=</span><span class="st">&quot;IE=edge,chrome=1&quot;</span><span class="kw">&gt;</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;meta</span> <span class="er">name</span><span class="ot">=</span><span class="st">&quot;viewport&quot;</span> <span class="er">content</span><span class="ot">=</span><span class="st">&quot;width=device-width,initial-scale=1&quot;</span><span class="kw">&gt;</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;meta</span> <span class="er">charset</span><span class="ot">=</span><span class="st">&quot;UTF-8&quot;</span><span class="kw">&gt;</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;link</span> <span class="er">rel</span><span class="ot">=</span><span class="st">&quot;stylesheet&quot;</span> <span class="er">href</span><span class="ot">=</span><span class="st">&quot;//cdn.jsdelivr.net/npm/docsify@4/themes/vue.css&quot;</span> <span class="kw">/&gt;</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/head&gt;</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;body&gt;</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;div</span> <span class="er">id</span><span class="ot">=</span><span class="st">&quot;app&quot;</span><span class="kw">&gt;&lt;/div&gt;</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;script&gt;</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="bu">window</span><span class="op">.</span><span class="at">$docsify</span> <span class="op">=</span> {</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>      <span class="dt">name</span><span class="op">:</span> <span class="st">'docsify vega'</span><span class="op">,</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>      <span class="dt">repo</span><span class="op">:</span> <span class="st">'https://github.com/jerCarre/docsify_vega'</span><span class="op">,</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>   }</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;/script&gt;</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;script</span> <span class="er">src</span><span class="ot">=</span><span class="st">&quot;//cdn.jsdelivr.net/npm/docsify@4&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;script</span> <span class="er">src</span><span class="ot">=</span><span class="st">&quot;//cdn.jsdelivr.net/npm/vega@5&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;script</span> <span class="er">src</span><span class="ot">=</span><span class="st">&quot;//cdn.jsdelivr.net/npm/vega-lite@5&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;script</span> <span class="er">src</span><span class="ot">=</span><span class="st">&quot;//cdn.jsdelivr.net/npm/vega-embed@6&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;script</span> <span class="er">src</span><span class="ot">=</span><span class="st">&quot;//cdn.jsdelivr.net/gh/jerCarre/vega_docsify@v1.1/lib/docsivega.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/body&gt;</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/html&gt;</span></span></code></pre></div>
<p>and the README.md</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># Hello world !</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="in">``vega</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="in">https://raw.githubusercontent.com/vega/vega/master/docs/examples/bar-chart.vg.json</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p>To get :</p>
<p><img src="https://jercarre.github.io/medium_stories/docsify_vega_github/firstvega.png" /></p>
<p><a href="https://jercarre.github.io/medium_stories/#/docsify_vega_github/example?id=simple-vega-chart">DEMO</a></p>
<h3 id="une-crypto-dans-vega-lite">A crypto in Vega-Lite</h3>
<p>Vega/Vega-Lite also has the advantage of being able to read its data from an API. There are still some constraints: no header management and only GET. After some research, the <a href="https://www.coingecko.com/en/api">coingecko</a> API seems to be ideal. It allows to have the price of a crypto on the last X days, and does not require a token access.</p>
<blockquote>
<p>Insofar as the call to this API is made by the browser, it will be impossible to hide the passage of a token in the url.</p>
</blockquote>
<p>To get the bitcoin price for the last 24 hours, you can call: https://api.coingecko.com/api/v3/coins/bitcoin/market_chart?vs_currency=eur&amp;days=1</p>
<p>and have in response (as a shortcut) :</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;prices&quot;</span><span class="fu">:</span><span class="ot">[[</span><span class="dv">1641137007567</span><span class="ot">,</span><span class="fl">41637.83411713587</span><span class="ot">],[</span><span class="dv">1641137244268</span><span class="ot">,</span><span class="fl">41579.072842123</span><span class="ot">],[</span><span class="dv">1641137476057</span><span class="ot">,</span><span class="fl">41578.04595490743</span><span class="ot">],[</span><span class="dv">1641137952530</span><span class="ot">,</span><span class="fl">41504.83017220277</span><span class="ot">],[</span><span class="dv">1641138178298</span><span class="ot">,</span><span class="fl">41502.722548713165</span><span class="ot">],[</span><span class="dv">1641138490632</span><span class="ot">,</span><span class="fl">41572.95862016224</span><span class="ot">],[</span><span class="dv">1641138725476</span><span class="ot">,</span><span class="fl">41664.34163465742</span><span class="ot">],[</span><span class="dv">1641139126440</span><span class="ot">,</span><span class="fl">41696.036160482596</span><span class="ot">],[</span><span class="dv">1641139324313</span><span class="ot">,</span><span class="fl">41706.24565959366</span><span class="ot">],[</span><span class="dv">1641139579229</span><span class="ot">,</span><span class="fl">41690.04405619627</span><span class="ot">],[</span><span class="dv">1641140038186</span><span class="ot">,</span><span class="fl">41750.43550340376</span><span class="ot">],[</span><span class="dv">1641140229278</span><span class="ot">,</span><span class="fl">41811.27689166205</span><span class="ot">],[</span><span class="dv">1641140453839</span><span class="ot">,</span><span class="fl">41735.801954558665</span><span class="ot">],[</span><span class="dv">1641140998579</span><span class="ot">,</span><span class="fl">41769.16264562593</span><span class="ot">]]</span><span class="fu">}</span></span></code></pre></div>
<blockquote>
<p>The element [0] is the time (epoch), the [1] is the value in €.</p>
</blockquote>
<p>Just put it in a diagram:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># Hello crypto world !</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="in">equality</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="in">{</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="in">  &quot;$schema&quot;: &quot;https://vega.github.io/schema/vega-lite/v5.json&quot;,</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="in">  &quot;description&quot;: &quot;Bitcoin/eur last day evolution&quot;,</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="in">  &quot;width&quot;: 500,</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="in">  &quot;height&quot;: 300,</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="in">  &quot;data&quot;: {</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="in">    &quot;format&quot;: { &quot;type&quot;: &quot;json&quot;, &quot;property&quot;: &quot;prices&quot;},</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="in">    &quot;url&quot;: &quot;https://api.coingecko.com/api/v3/coins/bitcoin/market_chart?vs_currency=eur&amp;days=1&quot;</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="in">  },</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="in">  &quot;mark&quot;: &quot;line&quot;,</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="in">  &quot;encoding&quot;: {</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="in">    &quot;x&quot;: {</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="in">      &quot;field&quot;: &quot;0&quot;, </span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a><span class="in">      &quot;type&quot;: &quot;temporal&quot;, </span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a><span class="in">      &quot;axis&quot;: { &quot;title&quot;: &quot;last day&quot;}</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a><span class="in">    },</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a><span class="in">    &quot;y&quot;: {</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a><span class="in">      &quot;field&quot;: &quot;1&quot;,</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a><span class="in">      &quot;type&quot;: &quot;quantitative&quot;,</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a><span class="in">      &quot;scale&quot;: { &quot;zero&quot;: false},</span></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a><span class="in">      &quot;axis&quot;: { &quot;title&quot;: &quot;price in €&quot;}</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a><span class="in">    } </span></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div>
<p><img src="https://jercarre.github.io/medium_stories/docsify_vega_github/firstcryptochart.png" /></p>
<p><a href="https://jercarre.github.io/medium_stories/#/docsify_vega_github/example?id=first-crypto-chart">DEMO</a></p>
<h2 id="et-un-peu-plus">and a little more ...</h2>
<p>You can enrich the diagram with sliders that move with the mouse on the curve. Also have the last value displayed on the right.</p>
<p><img src="https://jercarre.github.io/medium_stories/docsify_vega_github/advancedcryptochart.png" /></p>
<p><a href="https://jercarre.github.io/medium_stories/#/docsify_vega_github/example?id=advanced-crypto-chart">DEMO</a></p>
<p>With the same data we can also display the price distribution:</p>
<p><img src="https://jercarre.github.io/medium_stories/docsify_vega_github/distributionchart.png" /></p>
<p><a href="https://jercarre.github.io/medium_stories/#/docsify_vega_github/example?id=bitcoin-last-60-days-distribution-chart">DEMO</a></p>
<h2 id="en-conclusion">In conclusion</h2>
<p>As we have seen, we can deploy on Github in a few minutes a static site displaying dynamic data, and without any HTML or javascript line. We only focus on the content!</p>
<p><em>Some useful links</em></p>
<ul>
<li><a href="https://jercarre.github.io/medium_stories/#/">The sources of this article and examples</a></li>
<li><a href="https://docsify.js.org">Docsify</a></li>
<li><a href="https://vega.github.io/vega-lite/">Vega-Lite</a></li>
<li><a href="https://www.coingecko.com/en/api">coingecko</a></li>
<li>A <a href="https://github.com/philips-software/post-to-medium-action">Github action</a> to publish automatically on Medium</li>
</ul>
